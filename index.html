<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Opic3D4E Server Process and Local Play - Simple</title>
    <link rel="manifest" href="manifest.json">
</head>

<body>
    <div id="video-container">
        <video id="webcamVideo" autoplay></video>
        <button id="btn" onclick="fullscreen()">
            View Fullscreen!
        </button>
    </div>
</body>

<script>

    async function startWebcam() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const videoElement = document.getElementById('webcamVideo');
            videoElement.srcObject = stream;
        } catch (error) {
            console.error('Error accessing webcam:', error);
        }
    }

    startWebcam();

    function makeLandscape() {
        // this works on android, not iOS
        if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape');
        }
    }

    function fullscreen() {
        var element = document.getElementById('video-container');
        if (element.mozRequestFullScreen) {
            element.mozRequestFullScreen();
            makeLandscape();
            toggleFullScreen();
        } else if (element.webkitRequestFullScreen) {
            element.webkitRequestFullScreen();
            makeLandscape();
            toggleFullScreen();
        }

    }

    function toggleFullScreen() {
        if (!document.fullscreenElement) {
            videoElement.requestFullscreen().catch(err => {
                console.error('Error attempting to enable full-screen mode:', err);
            });
        } else {
            document.exitFullscreen().catch(err => {
                console.error('Error attempting to exit full-screen mode:', err);
            });
        }
    }
</script>

</html>